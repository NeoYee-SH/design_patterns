# 适配器模式
## 模式定义
适配器模式(Adapter Pattern) ：将一个接口转换成客户希望的另一个接口，适配器模式使接口不兼容的那些类可以一起工作，其别名为包装器(Wrapper)。适配器模式既可以作为类结构型模式，也可以作为对象结构型模式。

## 模式结构
适配器模式包含如下角色：

Target：目标抽象类
Adapter：适配器类
Adaptee：适配者类
适配器模式有对象适配器和类适配器两种实现：
对象适配器：
![Adapter.jpg](http://www.yihuaiyuan.com/usr/uploads/2018/04/4187242552.jpg)

类适配器：
![Adapter_classModel.jpg](http://www.yihuaiyuan.com/usr/uploads/2018/04/4213861381.jpg)

![seq_AbatractFactory.jpg](http://www.yihuaiyuan.com/usr/uploads/2018/04/2229305849.jpg)
## 实例
在分析简单工厂模式时，我们创建了一个class： ‘D:\\wamp64\\www\\design_patterns\\factory\\simple_factory\\Jingdong.php’，里面实现了sync()、getStatus()、sendGoods()方法，现在京东对接扩展了业务，需要创建一个类，也要实现sync()、getStatus()、sendGoods()方法，除此之外还要实现editGoods()、searchOrders()方法，那么我们就可以用到适配器模式，复用原Jingdong.php里面的方法，然后扩展实现editGoods()、searchOrders()方法。如果使用继承，就是类适配器；使用组件的方式实现，就是对象适配器。

## 模式分析
当系统需要复用现有类，而该类的接口不符合系统的需求时，可以使用适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作；多个组件功能类似，但接口不统一且可能会经常切换时，也可使用适配器模式，使得客户端可以以统一的接口使用它们。

## 适配器模式的优点
将目标类和适配者类解耦，通过引入一个适配器类来重用现有的适配者类，而无须修改原有代码。
增加了类的透明性和复用性，将具体的实现封装在适配者类中，对于客户端类来说是透明的，而且提高了适配者的复用性。
灵活性和扩展性都非常好，通过使用配置文件，可以很方便地更换适配器，也可以在不修改原有代码的基础上增加新的适配器类，完全符合“开闭原则”。
由于适配器类是适配者类的子类，因此可以在适配器类中置换一些适配者的方法，使得适配器的灵活性更强。
一个对象适配器可以把多个不同的适配者适配到同一个目标，也就是说，同一个适配器可以把适配者类和它的子类都适配到目标接口。
##  适配器模式的缺点
#### 类适配器模式的缺点如下：
对于不支持多重继承的语言，一次最多只能适配一个适配者类，而且目标抽象类只能为抽象类，不能为具体类，其使用有一定的局限性，不能将一个适配者类和它的子类都适配到目标接口。
#### 对象适配器模式的缺点如下：
与类适配器模式相比，要想置换适配者类的方法就不容易。如果一定要置换掉适配者类的一个或多个方法，就只好先做一个适配者类的子类，将适配者类的方法置换掉，然后再把适配者类的子类当做真正的适配者进行适配，实现过程较为复杂。
## 模式扩展
**认适配器模式(Default Adapter Pattern)或缺省适配器模式**
当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现（空方法），那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求，它适用于一个接口不想使用其所有的方法的情况。因此也称为单接口适配器模式。
## 总结
结构型模式描述如何将类或者对象结合在一起形成更大的结构。
适配器模式用于将一个接口转换成客户希望的另一个接口，适配器模式使接口不兼容的那些类可以一起工作，其别名为包装器。适配器模式既可以作为类结构型模式，也可以作为对象结构型模式。
适配器模式包含四个角色：目标抽象类定义客户要用的特定领域的接口；适配器类可以调用另一个接口，作为一个转换器，对适配者和抽象目标类进行适配，它是适配器模式的核心；适配者类是被适配的角色，它定义了一个已经存在的接口，这个接口需要适配；在客户类中针对目标抽象类进行编程，调用在目标抽象类中定义的业务方法。
在类适配器模式中，适配器类实现了目标抽象类接口并继承了适配者类，并在目标抽象类的实现方法中调用所继承的适配者类的方法；在对象适配器模式中，适配器类继承了目标抽象类并定义了一个适配者类的对象实例，在所继承的目标抽象类方法中调用适配者类的相应业务方法。
适配器模式的主要优点是将目标类和适配者类解耦，增加了类的透明性和复用性，同时系统的灵活性和扩展性都非常好，更换适配器或者增加新的适配器都非常方便，符合“开闭原则”；类适配器模式的缺点是适配器类在很多编程语言中不能同时适配多个适配者类，对象适配器模式的缺点是很难置换适配者类的方法。
适配器模式适用情况包括：系统需要使用现有的类，而这些类的接口不符合系统的需要；想要建立一个可以重复使用的类，用于与一些彼此之间没有太大关联的一些类一起工作。


参考资料：
- http://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/adapter.html
- https://segmentfault.com/a/1190000005806009
- https://blog.csdn.net/carson_ho/article/details/54910430

